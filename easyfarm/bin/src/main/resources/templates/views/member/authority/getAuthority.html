<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="@{layout/default}">

	<th:block layout:fragment="customTitle">
		<title>권한조회</title>
	</th:block>
	
	<th:block layout:fragment="pageTitle">
		권한관리 - 권한조회
	</th:block>
	
	<th:block layout:fragment="customCss">
		<style type="text/css">
			.row{
					padding :0;
				}
		</style>
	</th:block>
	
	<th:block layout:fragment="customContents">
	
	
			
	
				
			<div class="box-content">
					<table  class="table table-hover table-striped">
						<thead>
							<tr>
								<th>권한 코드</th>
								<th>권한 명</th>
								<th>사용 상태</th>
								<th>등록 아이디</th>			
								<th>권한 등록일자</th>
								<th th:if = "${session.SLEVEL == '관리자'}">수정</th>
								<th th:if = "${session.SLEVEL == '관리자'}">삭제</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="l : ${levelList}">
								<td th:text="${l.levelCode}"></td>							
								<td th:text="${l.levelName}"></td>				
								<td th:text="${l.useStatus}"></td>			
								<td th:text="${l.memberId}"></td>
								<td th:text="${l.memberRegDate}"></td>				
								
								
								<td th:if = "${session.SLEVEL == '관리자'}">
									<a th:href ="@{/member/modifyAuthority(levelCode=${l.levelCode})}">수정</a>
								</td>
								<td th:if = "${session.SLEVEL == '관리자'}">
								<button type="button" class="remove" th:value="${l.levelCode}">삭제</button>
									
								</td>
							
							</tr>
							<tr th:if="${levelList.size() == 0}"> 
								<td colspan="10" style ="text-align: center;">
								조회된 내용이 없습니다
								</td>
							</tr>
						</tbody>		
	
					</table>
				
			</div>
			
	</th:block>
	
	<th:block layout:fragment="customJavaScript">
		<script type="text/javascript">
		
				
				
					
				
						
						
					       
				
					      $('.remove').click(function(){
					    	  var removeCode = $(this).val();
								swal({   
									title: "정말 삭제하시겠습니까?",   
									text: "삭제시 복구불가",   
									type: "warning",   
									showCancelButton: true,   
									confirmButtonColor: "#DD6B55",   
									confirmButtonText: "삭제!", 
									cancelButtonText: "취소!", 
									closeOnConfirm: false,
									closeOnCancel: true,
									confirmButtonColor: '#f60e0e',
								},function(isConfirm){   
									if (isConfirm) {     
										location.href = "/member/removeAuthority?levelCode="+removeCode;
									}
								});
							})
					    
						
					
					
					
			
				
				
			
		
		</script>
	
	</th:block>