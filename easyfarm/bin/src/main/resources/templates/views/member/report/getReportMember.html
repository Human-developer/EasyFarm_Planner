<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="@{layout/default}">
	  
	<!-- 화면 title 설정 -->
	<th:block layout:fragment="customTitle">
		<title>신고목록 조회</title>
	</th:block>
	
	<!-- 위에 네비 메뉴에 표시되는 경로 타이틀 -->
	<th:block layout:fragment="pageTitle">
		신고목록 조회
	</th:block>

	
	<!-- 컨텐츠 작성은 여기서  ↓ ↓ ↓ -->
	<th:block layout:fragment="customContents">
	
	 
			
				
			<div class="box-content">
					<table id="example" class="table table-striped table-bordered display" style="width:100%">
						<thead>
							<tr>
								
								<th>신고사유</th>
								<th>대상 아이디</th>						
								<th>내용</th>			
								<th>등록일</th>
								<th>승인/반려 상태</th>
								<th>승인/반려 사유</th>
								<th>수정</th>
								<th>취소</th>
								<th>삭제</th>
								
							</tr>
						</thead>
						<tbody>
							<tr th:each="r : ${reportList}">													
								<td th:text="${r.reportReason}"></td>				
								<td th:text="${r.reportedMemberId}"></td>													
								<td><a th:text="내용" th:data-val="${r.reportDetailReason}" href="#" class="contents"></a></td>		
								<td th:text="${r.reportDate}"></td>													
								<td th:text="${r.reportApproval}"></td>		
								<td><a th:text="반려사유" th:data-val="${r.reportApprovalReason}" href="#" class="contents2"></a></td>									
								<td>
									<a th:if="${r.reportApproval == null and r.reportApproval == '진행중'}" th:href ="@{/member/modifReasonReport(reportHistoryCode=${r.reportHistoryCode})}">수정</a>
								</td>
								<td>
									<a th:if="${r.reportApproval == null and r.reportApproval == '진행중'}" th:href ="@{/member/cancelReasonReport(reportHistoryCode=${r.reportHistoryCode})}">취소</a>
								</td>
								<td>
									<a th:href ="@{/member/removeReasonReport(reportHistoryCode=${r.reportHistoryCode})}">삭제</a>
								</td>
							
							</tr>
						
							
						</tbody>		
	
					</table>
				<div class="modal-content"  style = "display: none">
					<div class="modal-header">
						<button type="button" class="close" ><span class="close" style="color: black;">X</span></button>
						<h4 class="modal-title"></h4>
					</div>
					<div class="modal-body">
						<p class="text" style="color: black;"></p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn  close" ><span style="color: black;">Close</span></button>
					</div>
				</div>
			</div>
			
	</th:block>
	
		<th:block layout:fragment="customJavaScript">
		<script>
		 $('.contents').click(function(){
			  
	    	  var contents = $(this).attr("data-val");
			  $('.modal-content').attr('style','display: block');
			  $('.text').text(contents);
			  $('.modal-title').text("신고내용");
				   
		  })
		 
		 	
		 $('.close').click(function(){
		  		  
		 	 $('.modal-content').attr('style','display: none');
		 })
		 
		 $('.contents2').click(function(){
			  
	    	  var contents = $(this).attr("data-val");
			  $('.modal-content').attr('style','display: block');
			  $('.text').text(contents);
			  $('.modal-title').text("반려내용");
		  })
		 
		 	
		 $('.close').click(function(){
		  		  
		 	 $('.modal-content').attr('style','display: none');
		 })
		 
		 $('.remove').click(function(){
	    	  var removeCode = $(this).attr("data-val");
	   
				swal({   
					title: "정말 삭제하시겠습니까?",   
					text: "삭제시 복구불가",   
					type: "warning",   
					showCancelButton: true,   
					confirmButtonColor: "#DD6B55",   
					confirmButtonText: "삭제!", 
					cancelButtonText: "취소!", 
					closeOnConfirm: false,
					closeOnCancel: true,
					confirmButtonColor: '#f60e0e',
				},function(isConfirm){   
					if (isConfirm) {     
						location.href = "/member/removeBaseDate?statusCriteriaCode="+removeCode;
					}
				});
			})
	
		
		</script>
	</th:block>
		<th:block layout:fragment="customScriptLib">
		<script src="/assets/plugin/datatables/media/js/jquery.dataTables.min.js"></script>
		<script src="/assets/plugin/datatables/media/js/dataTables.bootstrap.min.js"></script>
		<script src="/assets/plugin/datatables/extensions/Responsive/js/dataTables.responsive.min.js"></script>
		<script src="/assets/plugin/datatables/extensions/Responsive/js/responsive.bootstrap.min.js"></script>
		<script src="/assets/scripts/datatables.demo.min.js"></script>
		
	</th:block>

</html>