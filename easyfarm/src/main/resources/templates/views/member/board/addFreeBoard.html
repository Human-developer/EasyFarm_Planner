<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="@{layout/default}">
	
	<th:block layout:fragment="customTitle">
		<title>글쓰기</title>
	</th:block>
	
	<th:block layout:fragment="pageTitle">
		<a th:href="@{/member/getFreeBoard}">자유게시판</a>-글쓰기
	</th:block>
	
	
	<th:block layout:fragment="customContents">
		<div class="box-content">
			<h3>자유게시판</h3>
			<hr>
		
			
			<div class="card-content">
						<form data-toggle="validator" class="form-horizontal" method="post" th:action="@{/member/addFreeBoard}" enctype="multipart/form-data">
							<div class="form-group">
								<label for="writer" class="col-sm-2 control-label">작성자</label>
								<div class="col-sm-9">
									<input type="text" class="form-control" id="boardId" name="boardId" readonly="readonly" th:value="${session.SID}">
								</div>
							</div>
					
							<div class="form-group">
								<label for="title" class="col-sm-2 control-label">제목</label>
								<div class="col-sm-9">
									<input type="text" class="form-control" id="boardTitle"  name="boardTitle" placeholder="제목을 입력해주세요" >
								</div>
							</div>
							<div class="form-group">
								<label for="content" class="col-sm-2 control-label">내용</label>
								<div class="col-sm-9">
									<textarea class="form-control" id="boardContent"  name="boardContent" placeholder="내용을 입력해주세요" style="resize: none;  height: 350px; width: 100%;" required></textarea>
								</div>
							</div>
							<div class="form-group">
								<label for="boardFile" class="col-sm-2 control-label">첨부파일</label>
								<div class="col-sm-9">
									<input type="file" class="form-control" id="file"  name="file" placeholder="첨부파일 " >
								</div>
							</div>
							
					
							<div class ="form-group t-center">
								<button type="submit" id="btn" class="btn btn-success btn-bordered waves-effect waves-light">등록</button>
								<a th:href="@{/member/getFreeBoard}" class="btn btn-success btn-bordered waves-effect waves-light">목록</a>
							</div>
						</form>
					</div>
				
		</div>
		

	</th:block>
	

	<!-- 사용자 정의 자바스크립트 -->
	<th:block layout:fragment="customJavaScript">
		<script>
			// 파일첨부 체크 리스트
			$("input[id=file]").change(function(){
			 
			    if($(this).val() != ""){
			      // 확장자 체크
			          var ext = $(this).val().split(".").pop().toLowerCase();
			          if($.inArray(ext, ["gif","jpg","jpeg","png","hwp","pdf","doc","xls","xlsx","ppt","pptx","docx"]) == -1){
			              alert("gif, jpg, jpeg, png 파일만 업로드 해주세요.");
			              $(this).val("");
			              return;
			          }
			          
			          // 용량 체크
			          for (var i=0; i<this.files.length; i++) {
			            var fileSize = this.files[i].size;
			            var fSMB = (fileSize / (1024 * 1024)).toFixed(2);
			            var maxSize = 1024 * 1024 * 1;
			            var mSMB = (maxSize / (1024 * 1024));
			            if(fileSize > maxSize){
			              alert(this.files[i].name + "(이)가 용량 1MB을 초과했습니다.\n\n" + fSMB + "MB</font> / " + mSMB + "MB");
			              $(this).val("");    
			            }
			          }
			    }
			});

		</script>
	
	</th:block>

</html>