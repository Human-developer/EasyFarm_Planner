<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="@{layout/default}">
	  
	<!-- 화면 title 설정 -->
	<th:block layout:fragment="customTitle">
		<title>신고사유 조회</title>
	</th:block>
	
	<!-- 위에 네비 메뉴에 표시되는 경로 타이틀 -->
	<th:block layout:fragment="pageTitle">
		신고사유 조회
	</th:block>
	 <!-- 사용자 정의 css 라이브러리 -->
	<th:block layout:fragment="customCssLib">
		<link rel="stylesheet" th:href="@{/assets/sys/sysStyle.css}">
	</th:block>
	
	<!-- 컨텐츠 작성은 여기서  ↓ ↓ ↓ -->
	<th:block layout:fragment="customContents">
	
	
	
				
			<div class="box-content">
					<div class=""  align="right"> 																		
						<a th:href="@{/member/addReasonReport}" style="color: black;"><button type="button" class="btn btn-success btn-rounded btn-bordered waves-effect waves-light " style="margin-right: 30px; " > 등록 </button></a>
					</div>
					<h3>신고사유 조회</h3>
					<hr>
					<table id="reportTable" >
						<thead>
							<tr>
								<th>신고사유 코드</th>
								<th>신고사유 명</th>
								<th>정지일수</th>
								<th>등록 아이디</th>			
								<th>등록일</th>
								<th>사용유무</th>
								<th th:if = "${session.SLEVEL == '관리자'}">설정</th>
								
							</tr>
						</thead>
						<tbody>
							<tr th:each="r : ${reportReasonList}">
								<td th:text="${r.reportCode}"></td>							
								<td th:text="${r.reportReason}"></td>				
								<td th:text="${r.reportBanDays}"></td>			
								<td th:text="${r.memberId}"></td>
								<td th:text="${r.reportRegDate}"></td>				
								<td th:text="${r.useStatus}"></td>				
								<td th:if = "${session.SLEVEL == '관리자'}">
									<div class="btn-group">
										<button type="button" class="btn btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fa fa-cog"></span></button> 
										<ul class="dropdown-menu">
											<li><a th:href ="@{/member/modifyReasonReport(reportCode=${r.reportCode})}">수정</a></li>
											<li><a th:data-val="${r.reportCode}" class="remove" th:href="@{#}">삭제</a></li>
										</ul> 
									</div>
								</td>
								
							
							</tr>
						</tbody>		
	
					</table>
				
			</div>
			
	</th:block>
	<th:block layout:fragment="customScriptLib">
		
		<div th:replace="fragments/dataTable :: dataTable" th:remove="tag"></div>	
	</th:block>

	
		
	
	<th:block layout:fragment="customJavaScript">
		<script>
		var lang_kor = {
		        "decimal" : "",
		        "emptyTable" : "신고목록이 없습니다",
		        "info" : "_START_ - _END_ (총 _TOTAL_ 명)",
		        "infoEmpty" : "0명",
		        "infoFiltered" : "(전체 _MAX_ 신고목록 중 검색결과)",
		        "infoPostFix" : "",
		        "thousands" : ",",
		        "lengthMenu" : "_MENU_ 개씩 보기",
		        "loadingRecords" : "로딩중...",
		        "processing" : "처리중...",
		        "search" : "검색 : ",
		        "zeroRecords" : "검색된 목록이 없습니다.",
		        "paginate" : {
		            "first" : "첫 페이지",
		            "last" : "마지막 페이지",
		            "next" : "다음",
		            "previous" : "이전"
		        },
		        "aria" : {
		            "sortAscending" : " :  오름차순 정렬",
		            "sortDescending" : " :  내림차순 정렬"
		        }
		}
		
		$('#reportTable').sysDataTable(lang_kor,[0]);
		
		
		  $('.remove').click(function(){
	    	  var removeCode = $(this).attr("data-val");
	   
				swal({   
					title: "정말 삭제하시겠습니까?",   
					text: "삭제시 복구불가",   
					type: "warning",   
					showCancelButton: true,   
					confirmButtonColor: "#DD6B55",   
					confirmButtonText: "삭제!", 
					cancelButtonText: "취소!", 
					closeOnConfirm: false,
					closeOnCancel: true,
					confirmButtonColor: '#f60e0e',
				},function(isConfirm){   
					if (isConfirm) {     
						location.href = "/member/removeReasonReport?reportCode="+removeCode;
					}
				});
			})
		
		</script>
	</th:block>

</html>