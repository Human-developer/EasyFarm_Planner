<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="@{layout/default}">
	  
	<!-- 화면 title 설정 -->
	<th:block layout:fragment="customTitle">
		<title>계획 등록</title>
	</th:block>
	
	<!-- 위에 네비 메뉴에 표시되는 경로 타이틀 -->
	<th:block layout:fragment="pageTitle">
		계획 등록
	</th:block>
	
	<!-- 사용자 정의 css 라이브러리 -->
	<th:block layout:fragment="customCssLib">
		<!-- Jquery UI -->
		<link rel="stylesheet" th:href="@{/assets/plugin/jquery-ui/jquery-ui.min.css}">
		<link rel="stylesheet" th:href="@{/assets/plugin/jquery-ui/jquery-ui.structure.min.css}">
		<link rel="stylesheet" th:href="@{/assets/plugin/jquery-ui/jquery-ui.theme.min.css}">
		
		<!-- FlexDatalist -->
		<link rel="stylesheet" th:href="@{/assets/plugin/flexdatalist/jquery.flexdatalist.min.css}">
	
		<!-- Popover -->
		<link rel="stylesheet" th:href="@{/assets/plugin/popover/jquery.popSelect.min.css}">
	
		<!-- Select2 -->
		<link rel="stylesheet" th:href="@{/assets/plugin/select2/css/select2.min.css}">
	
		<!-- Timepicker -->
		<link rel="stylesheet" th:href="@{/assets/plugin/timepicker/bootstrap-timepicker.min.css}">
		
		<!-- Colorpicker -->
		<link rel="stylesheet" th:href="@{/assets/plugin/colorpicker/css/bootstrap-colorpicker.min.css}">
	
		<!-- DateRangepicker -->
		<link rel="stylesheet" th:href="@{/assets/plugin/daterangepicker/daterangepicker.css}">
		
		<!-- 데이트피커 플러그인 css, js파일 연결 -->
		<link rel="stylesheet" href="/assets/plugin/air-datepicker/css/datepicker.min.css">
	</th:block>
	
	<!-- 사용자 정의 css -->
	<th:block layout:fragment="customCss">
		<style type="text/css">
			.form-control[readonly]{background-color: #F5F5F5;}
			hr{border-bottom: 1px solid grey;}
			#btnSize{margin-right: 40px;}
		</style>
	</th:block>
	
	
	<!-- 컨텐츠 작성은 여기서  ↓ ↓ ↓ -->
	<th:block layout:fragment="customContents">
		<form th:action="@{/plan/addWorkphasePlan}" method="post" autocomplete="off">
			<div class="container-fluid">
				<div class="row">
					<div class="col-lg-12">
						<div class="box-content">
							<h3>계획 등록</h3>
							<hr/>
							<div class="form-horizontal margin-bottom-30">
								<div class="form-group">
									<label for="projectPlanN" class="col-sm-2 control-label" style="width: 80px; padding-right: 0px;"><strong>계획차수</strong></label>
								    <div class="col-sm-2">
										<input class="form-control t-center" name="projectPlanN" id="projectPlanN" th:value="${projectPlanN}" readonly="readonly"/>
										<input class="hidden" name="projectPlanCode" th:value="${projectPlanCode}"/>
								    </div>
								</div>
								<div class="form-group">
									<label for="workPhase" class="col-sm-2 control-label" style="width: 80px; padding-right: 0px;"><strong>작업단계</strong></label>
								    <div class="col-sm-4">
										<select class="form-control" name="projectWorkphaseCode" id="workPhase">
											<option value=""> :: 단계선택 :: </option>
											<th:block th:if="${#lists.size(workphaseNameList) > 0}" th:each="w : ${workphaseNameList}">
												<option th:value="${w.projectWorkphaseCode}" th:text="|${w.workphase} : ${w.workphaseName}|"></option>
											</th:block>
										</select>
								    </div>
							    	<label for="workPhaseDate" class="col-sm-1 control-label pl-0" style="width: 60px;"><strong>기간</strong></label>
									<div class="col-md-5">
										<div class="input-daterange input-group" id="workPhaseDate-range">
											<input type="text" class="form-control" name="planWorkphaseBegin" data-language='kr'/>
											<span class="input-group-addon bg-primary text-white"> ~ </span>
											<input type="text" class="form-control" name="planWorkphaseEnd" data-language='kr'/>
										</div>
									</div>
								</div>
								<div class="form-group">
									<label for="workPhaseCate" class="col-sm-2 control-label" style="width: 80px; padding-right: 0px;"><strong>상세항목</strong></label>
								    <div class="col-sm-4">
										<select class="form-control" name="farmWorkphaseCateCode" id="workPhaseCate">
											<option value=""> :: 상세항목선택 :: </option>
											<th:block th:if="${#lists.size(workphaseCateNameList) > 0}" th:each="w : ${workphaseCateNameList}">
												<option th:value="${w.farmWorkphaseCateCode}" th:text="${w.commonWorkphaseCateName}"></option>
											</th:block>
										</select>
								    </div>
								    <label for="workPhaseCateDate" class="col-sm-1 control-label pl-0" style="width: 60px;"><strong>기간</strong></label>
									<div class="col-md-5">
										<div class="input-daterange input-group" id="workPhaseCateDate-range">
											<input type="text" class="form-control" name="planWorkphaseCateBegin" data-language='kr'/>
											<span class="input-group-addon bg-primary text-white"> ~ </span>
											<input type="text" class="form-control" name="planWorkphaseCateEnd" data-language='kr'/>
										</div>
									</div>
								</div>
								<div class="form-group">
									<label for="planWorkphaseColor" class="col-sm-2 control-label" style="width: 80px; padding-right: 0px;"><strong>배경색상</strong></label>
								    <div class="col-sm-4">
										<input type="text" name="planWorkphaseColor" class="colorpicker-default form-control colorpicker-element" value="#3df545">
								    </div>
								    <label for="planWorkphaseTextColor" class="col-sm-1 control-label pl-0" style="width: 60px;"><strong>글자색상</strong></label>
									<div class="col-md-5">
										<input type="text" name="planWorkphaseTextColor" class="colorpicker-default form-control colorpicker-element" value="#ffffff">
									</div>
								</div>
							</div>
								
							<hr>
							<div class="form-group t-center">
								<button type="submit" id="btnSize" class="btn btn-primary btn-md waves-effect waves-light btn-rounded btnSize">계획등록</button>
								<button type="button" th:data-value="|/plan/getSchedule?projectPlanCode=${projectPlanCode}|" onclick="moveAddSpend(this)" class="btn btn-success btn-md waves-effect waves-light btn-rounded btnSize">
									켈린더 돌아가기
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</form>
	</th:block>
	
	<!-- 사용자 정의 자바스크립트 라이브러리 -->
	<th:block layout:fragment="customScriptLib">
	
		<!-- Flex Datalist -->
		<script th:src="@{/assets/plugin/flexdatalist/jquery.flexdatalist.min.js}"></script>
	
		<!-- Popover -->
		<script th:src="@{/assets/plugin/popover/jquery.popSelect.min.js}"></script>
	
		<!-- Select2 -->
		<script th:src="@{/assets/plugin/select2/js/select2.min.js}"></script>
	
		<!-- Multi Select -->
		<script th:src="@{/assets/plugin/multiselect/multiselect.min.js}"></script>
	
		<!-- Timepicker -->
		<script th:src="@{/assets/plugin/timepicker/bootstrap-timepicker.min.js}"></script>
	
		<!-- Colorpicker -->
		<script th:src="@{/assets/plugin/colorpicker/js/bootstrap-colorpicker.min.js}"></script>
	
		<!-- Datepicker -->
		<script th:src="@{/assets/plugin/datepicker/js/bootstrap-datepicker.min.js}"></script>
	
		<!-- Moment -->
		<script th:src="@{/assets/plugin/moment/moment.js}"></script>
	
		<!-- DateRangepicker -->
		<script th:src="@{/assets/plugin/daterangepicker/daterangepicker.js}"></script>
	
		<!-- Maxlength -->
		<script th:src="@{/assets/plugin/maxlength/bootstrap-maxlength.min.js}"></script>
	
		<!-- Demo Scripts -->
		<script th:src="@{/assets/scripts/form.custom.PGS.js}"></script>
		
		<!-- 데이트피커 플러그인 css, js파일 연결 -->
		<script src="/assets/plugin/air-datepicker/js/datepicker.min.js"></script>
		<script src="/assets/plugin/air-datepicker/js/i18n/datepicker.kr.js"></script>
	</th:block>
	
	<!-- 사용자 정의 자바스크립트 -->
	<th:block layout:fragment="customJavaScript">
		<script type="text/javascript">
			function moveAddSpend(btn){
				location.href = $(btn).attr('data-value');
			};
			
			/* $('#workPhaseCateDate-range, #workPhaseDate-range').datepicker({
				language: 'kr',
		        autoClose: true,
			}); */
			
			/* datepicker */
			var date = new Date();
			var beginDate = $('[name="planWorkphaseBegin"]').datepicker({
			  //년-월-일
			  startDate: new Date(date.getFullYear(), date.getMonth(), date.getDate()),
			  language: 'kr',
			  autoClose: true,
			  //선택한 날짜를 가져옴
			  onSelect: function (date) {
			      //시작일 datepicker에 최대날짜를 방금 클릭한 날짜로 설정
			      var endNum 	= new Date(date);
			      var endDate 	= $('[name="planWorkphaseEnd"]');
			      
			      endDate.datepicker({
			          minDate: new Date(endNum)
			      });
			      if(endDate.val() == ""){
			    	  endDate.val(date);
			      }
			      
			  }
			}).data('datepicker');
			var endDate = $('[name="planWorkphaseEnd"]').datepicker({
			  startDate: new Date(date.getFullYear(), date.getMonth(), date.getDate()),  // 시간, 분은 00으로 초기 설정
			  language: 'kr',
			  autoClose: true,
			  //선택한 날짜를 가져옴
			  onSelect: function (date) {
				  
			      var startNum 	= new Date(date);
			      var startDate = $('[name="planWorkphaseBegin"]');
			      
			      startDate.datepicker({
			          //시작일 datepicker에 최대날짜를 방금 클릭한 날짜로 설정
			          maxDate: new Date(startNum)
			      });
			      
			      if(startDate.val() == ""){
			    	  startDate.val(date);
			      }
			      
			  }
			}).data('datepicker');
			
			
			/* datepicker */
			var date = new Date();
			var beginDate = $('[name="planWorkphaseCateBegin"]').datepicker({
			  //년-월-일
			  startDate: new Date(date.getFullYear(), date.getMonth(), date.getDate()),
			  language: 'kr',
			  autoClose: true,
			  //선택한 날짜를 가져옴
			  onSelect: function (date) {
			      //시작일 datepicker에 최대날짜를 방금 클릭한 날짜로 설정
			      var endNum 	= new Date(date);
			      var endDate 	= $('[name="planWorkphaseCateEnd"]');
			      
			      endDate.datepicker({
			          minDate: new Date(endNum)
			      });
			      if(endDate.val() == ""){
			    	  endDate.val(date);
			      }
			      
			  }
			}).data('datepicker');
			var endDate = $('[name="planWorkphaseCateEnd"]').datepicker({
			  startDate: new Date(date.getFullYear(), date.getMonth(), date.getDate()),  // 시간, 분은 00으로 초기 설정
			  language: 'kr',
			  autoClose: true,
			  //선택한 날짜를 가져옴
			  onSelect: function (date) {
				  
			      var startNum 	= new Date(date);
			      var startDate = $('[name="planWorkphaseCateBegin"]');
			      
			      startDate.datepicker({
			          //시작일 datepicker에 최대날짜를 방금 클릭한 날짜로 설정
			          maxDate: new Date(startNum)
			      });
			      
			      if(startDate.val() == ""){
			    	  startDate.val(date);
			      }
			      
			  }
			}).data('datepicker');
			
		</script>
	</th:block>

</html>