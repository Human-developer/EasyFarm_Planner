<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="@{layout/default}">
	  
	<!-- 화면 title 설정 -->
	<th:block layout:fragment="customTitle">
		<title>계획 관리</title>
	</th:block>
	
	<!-- 위에 네비 메뉴에 표시되는 경로 타이틀 -->
	<th:block layout:fragment="pageTitle">
		계획 조회
	</th:block>
	
	<!-- 사용자 정의 css 라이브러리 -->
	<th:block layout:fragment="customCssLib">
	
		<link rel="stylesheet" href="/assets/sys/sysStyle.css">
		<!-- Data Tables -->
		<link rel="stylesheet" href="/assets/plugin/datatables/media/css/dataTables.bootstrap.min.css">
		<link rel="stylesheet" href="/assets/plugin/datatables/extensions/Responsive/css/responsive.bootstrap.min.css">
		
	</th:block>
	
	<!-- 사용자 정의 css -->
	<th:block layout:fragment="customCss">
		<style type="text/css">
			.btnSize{margin-right: 5px;}
			.table-responsive table th, td{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}​
			.table-responsive table{table-layout:fixed}
			table a{color: #1d84df !important; cursor: pointer;}
		</style>
	</th:block>
	
	
	<!-- 컨텐츠 작성은 여기서  ↓ ↓ ↓ -->
	<th:block layout:fragment="customContents">
	
		<div class="container-fluid">
		    <div class="row">
				<div class="col-md-12">
					<div class="box-content">
						<div class="pull-left">
							<th:block th:if="${projectName != null}">
									<input class="hidden" th:value="${projectCode}" id="projectCode"/>
									<div style="font-size: 24px;" th:text="|${projectName} 프로젝트 보험료지출계획 조회|"></div>
							</th:block>
							<th:block th:unless="${projectName != null}">
								<div style="font-size: 24px;">계획 조회</div>
							</th:block>
						</div>
						<div class="pull-right">
							<button type="button" th:value="|/plan/getSchedule?projectPlanCode=${projectPlanCode}|" onclick="moveAddSpend(this)" class="btn btn-success btn-sm waves-effect waves-light btn-rounded">
								켈린더 돌아가기
							</button>
						</div>
						<div style="margin-top: 6px;">
							<small style="color: red; margin-left: 6px;"></small>
						</div>
						<hr/>
						<div class="table-responsive">
							<table class="table table-striped table-bordered display" style="width:100%">
								<thead>
									<tr>
										<th>작업단계</th>
										<th>단계명</th>
										<th>상세항목명</th>
										<th>작업시작일</th>
										<th>작업종료일</th>
										<th>기간수정</th>
										<th>상세계획</th>
										<th>간편보기</th>
									</tr>
								</thead>
								<tbody>
									<th:block th:if="${#lists.size(workphaseSchedule) > 0}" th:each="w : ${workphaseSchedule}">
										<tr>
											<td th:text="${w.workphase}"></td>
											<td th:text="${w.workphaseName}"></td>
											<td></td>
											<td th:text="${w.planWorkphaseBegin}"></td>
											<td th:text="${w.planWorkphaseEnd}"></td>
											<td>
												<a th:href="@{|/plan/modifyWorkphasePlan?projectPlanCode=${projectPlanCode}&planWorkphaseCode=${w.planWorkphaseCode}|}">
													기간수정
												</a>
											</td>
											<td>
												<a th:href="@{|/plan/planScheduleDetail?projectPlanCode=${projectPlanCode}&planWorkphaseCode=${w.planWorkphaseCode}|}">
													상세계획
												</a>
											</td>
											<td>
												<a th:href="@{|/plan/planSimpleSchedul?projectPlanCode=${projectPlanCode}|}">
													간편보기
												</a>
											</td>
										</tr>
									</th:block>
									<th:block th:if="${#lists.size(workphaseCateSchedule) > 0}" th:each="wc : ${workphaseCateSchedule}">
										<tr>
											<td th:text="${wc.workphase}"></td>
											<td th:text="${wc.workphaseName}"></td>
											<td th:text="${wc.commonWorkphaseCateName}"></td>
											<td th:text="${wc.planWorkphaseCateBegin}"></td>
											<td th:text="${wc.planWorkphaseCateEnd}"></td>
											<td>
												<a th:href="@{|/plan/modifyWorkphasePlan?projectPlanCode=${projectPlanCode}&planWorkphaseCateCode=${wc.planWorkphaseCateCode}|}">
													기간수정
												</a>
											</td>
											<td>
												<a th:href="@{|/plan/planScheduleDetail?projectPlanCode=${projectPlanCode}&planWorkphaseCateCode=${wc.planWorkphaseCateCode}|}">
													상세계획
												</a>
											</td>
											<td>
												<a th:href="@{|/plan/planSimpleSchedul?projectPlanCode=${projectPlanCode}|}">
													간편보기
												</a>
											</td>
										</tr>
									</th:block>
								</tbody>
							</table>
						</div>
					</div>
					<!-- /.box-content -->
				</div>
			</div>
		</div>
		
	</th:block>
	
	
	<!-- 사용자 정의 자바스크립트 라이브러리 -->
	<th:block layout:fragment="customScriptLib">
		<script src="/assets/plugin/datatables/media/js/jquery.dataTables.min.js"></script>
		<script src="/assets/plugin/datatables/media/js/dataTables.bootstrap.min.js"></script>
		<script src="/assets/plugin/datatables/extensions/Responsive/js/dataTables.responsive.min.js"></script>
		<script src="/assets/plugin/datatables/extensions/Responsive/js/responsive.bootstrap.min.js"></script>
		<script src="/assets/scripts/datatables.demo.min.js"></script>
		<script src="/assets/sys/myDataTable.js"></script>
	</th:block>
	
	<!-- 사용자 정의 자바스크립트 -->
	<th:block layout:fragment="customJavaScript">
		<script type="text/javascript">
		
			function moveAddSpend(btn){
				location.href = btn.value;
			};	
		
			var lang_kor = {
			        "decimal" : "",
			        "emptyTable" : "등록된 정보가 없습니다",
			        "info" : "_START_ - _END_",
			        "infoEmpty" : "0",
			        "infoFiltered" : "(전체 _MAX_검색결과)",
			        "infoPostFix" : "",
			        "thousands" : ",",
			        "lengthMenu" : "_MENU_ 개씩 보기",
			        "loadingRecords" : "로딩중...",
			        "processing" : "처리중...",
			        "search" : "검색 : ",
			        "zeroRecords" : "검색된 정보가 없습니다.",
			        "paginate" : {
			            "first" : "첫 페이지",
			            "last" : "마지막 페이지",
			            "next" : "다음",
			            "previous" : "이전"
			        },
			        "aria" : {
			            "sortAscending" : " :  오름차순 정렬",
			            "sortDescending" : " :  내림차순 정렬"
			        }
			}
			
			$('table').DataTable({
				language : lang_kor
			});
			
		</script>		
	</th:block>

</html>